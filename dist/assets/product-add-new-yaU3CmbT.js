import{j as e,p as g,y as j}from"./index-CmA1NaPh.js";import{T as n,C as N}from"./text-area-Dd0ij0YE.js";import{P as f}from"./page-breadcrumb-D3brcKhP.js";import{C,c as P,a as h,b as c,u as q,o as w}from"./index.esm-CUC6EtsP.js";const y=({name:i,label:u,control:o,rules:s,option:l,...d})=>e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:i,className:"form-label text-secondary",children:u}),e.jsx(C,{name:i,control:o,rules:s,render:({field:b,fieldState:t})=>e.jsxs(e.Fragment,{children:[e.jsxs("select",{id:i,className:`js-example-basic-single form-select form-control ${t.error?"is-invalid":""}`,...b,...d,"data-width":"100%",defaultValue:0,children:[e.jsxs("option",{value:0,disabled:!0,children:["Select ",i]}),l==null?void 0:l.map((a,m)=>e.jsx("option",{value:a==null?void 0:a.value,children:a==null?void 0:a.label},m))]}),t.error&&e.jsx("div",{className:"invalid-feedback",children:t.error.message})]})})]}),_=({currentProduct:i,editMode:u=!1})=>{const o=P().shape({name:h().required("Product name is required").max(100,"Product name must not exceed 100 characters"),description:h().required("Description is required").max(1e3,"Description must not exceed 1000 characters"),unit_price:c().required("Unit price is required").positive("Unit price must be a positive number").typeError("Unit price must be a valid number"),discount_price:c().nullable().positive("Discount price must be a positive number").typeError("Discount price must be a valid number"),inventory:c().required("Inventory is required").integer("Inventory must be an integer").min(0,"Inventory must be at least 0").typeError("Inventory must be a valid number"),category:c().required("Category is required").integer("Category must be a valid integer").positive("Category must be a positive number").typeError("Category must be a valid number"),status:c().required("Status is required").oneOf([1,2,3],"Invalid status value")}),{control:s,handleSubmit:l,reset:d,formState:{errors:b,isSubmitting:t}}=q({resolver:w(o),defaultValues:{name:"",unit_price:"",discount_price:null,inventory:"",category:null,description:"",status:null}}),a=async m=>{var p,v,x;try{const r=await g.createProduct(m);((r==null?void 0:r.status)===200||(r==null?void 0:r.status)===201)&&(j.success(r==null?void 0:r.message),d())}catch(r){throw j.error((x=(v=(p=r==null?void 0:r.response)==null?void 0:p.data)==null?void 0:v.message)==null?void 0:x[0]),console.log(r),r}};return e.jsxs("div",{className:"page-content",children:[e.jsx(f,{title:"Products",subtitle:"Add New"}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12 grid-margin",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title mb-4",children:"Add New Product"}),e.jsxs("form",{className:"forms-sample",onSubmit:l(a),children:[e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(n,{name:"name",label:"Name",control:s,type:"text"})}),e.jsx("div",{className:"col-md-6",children:e.jsx(n,{name:"unit_price",label:"Unit Price",control:s,type:"number"})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(n,{name:"discount_price",label:"Discount Price (Optional)",control:s,type:"number"})}),e.jsx("div",{className:"col-md-6",children:e.jsx(n,{name:"inventory",label:"Inventory",control:s,type:"number"})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(y,{name:"category",label:"Category",control:s,option:[{value:1,label:"Category 1"},{value:2,label:"Category 2"},{value:3,label:"Category 3"}]})}),e.jsx("div",{className:"col-md-6",children:e.jsx(y,{name:"status",label:"Status",control:s,option:[{value:1,label:"Active"},{value:2,label:"Blocked"},{value:3,label:"Inactive"}]})})]}),e.jsx("div",{className:"row mb-3",children:e.jsx("div",{className:"col-md-12",children:e.jsx(N,{name:"description",label:"Product Description",control:s,placeholder:"Enter product description..."})})}),e.jsxs("button",{className:"btn btn-primary",type:"submit",children:[t&&e.jsx("span",{className:"spinner-border spinner-border-sm mx-2",role:"status","aria-hidden":"true"}),t?"Submitting":"Submit"]})]})]})})})})]})};export{_ as P};
